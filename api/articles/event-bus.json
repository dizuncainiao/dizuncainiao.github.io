{"title":"Event Bus","uid":"e27ca51324eb3fbf12d00b0c949efce4","slug":"event-bus","date":"2021-12-23T07:47:51.000Z","updated":"2021-12-24T11:28:21.417Z","comments":true,"path":"api/articles/event-bus.json","keywords":"å¸å°Šèœé¸Ÿä¸ªäººåšå®¢ï¼Œå¸å°Šèœé¸Ÿä¸ªäººç½‘ç«™ï¼Œwebå‰ç«¯ï¼ŒJavaScriptï¼ŒCSSï¼ŒHTML","cover":[],"content":"<h2 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“åœ¨ Vue ä¸­çˆ¶å­ç»„ä»¶é€šä¿¡ä½¿ç”¨ <code>props</code>ã€<code>$emit</code>ï¼Œå…„å¼Ÿç»„ä»¶æˆ–è€…è·¨ç»„ä»¶ä¹‹é—´å¯ä»¥é€šè¿‡ <code>Vuex</code> æˆ– <code>EventBus</code> ï¼ŒåŒ…æ‹¬ <code>$parent</code> ã€<code>$root</code> å’Œ <code>$refs</code> éƒ½æ˜¯å¯ä»¥è¾¾åˆ°é€šä¿¡çš„ç›®çš„ï¼Œæ€»ä¹‹ Vue ç»„ä»¶ä¹‹é—´çš„é€šä¿¡æ–¹å¼éå¸¸ä¸°å¯Œã€‚</p>\n<p>ä»Šå¤©çš„ä¸»è§’æ˜¯<code>EventBus</code> ï¼Œé‚£ä¹ˆå…ˆè°ˆè°ˆæˆ‘å¯¹å®ƒçš„ç†è§£ã€‚</p>\n<p><code>EventBus</code> ä¹‹æ‰€ä»¥èƒ½å®ç°å…¨å±€è·¨ç»„ä»¶é€šä¿¡é¦–å…ˆå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡æŒ‚åœ¨ <code>window</code> æˆ– <code>Vue.prototype</code> ä¸Šï¼Œå¹¶ä¸”èƒ½é€šè¿‡è§¦å‘äº‹ä»¶ä¼ å‚æ¥å®ç°æ•°æ®çš„ä¼ é€’ã€‚</p>\n<p>åœ¨å°å‹é¡¹ç›®ï¼ˆäºŒä¸‰åä¸ªé¡µé¢ï¼‰ä¸­ä½¿ç”¨èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒå‹å¥½çš„ï¼Œæ¯”èµ· <code>Vuex</code> è¦æ¥çš„ç®€å•ç²—æš´ä¸€ç‚¹ã€‚å› ä¸º <code>Vuex</code> éœ€è¦å»ºç«‹ <code>mutations</code> ã€<code>actions</code> ï¼ŒæŸäº›é€»è¾‘äº¤äº’ç”šè‡³éœ€è¦å€ŸåŠ© <code>computed</code> + <code>watch</code> æ¥å®ç°ï¼Œè¿™åœ¨å°é¡¹ç›®ä¸­æ˜¾å¾—æ¯”è¾ƒè‡ƒè‚¿ã€‚</p>\n<p>åœ¨å¤§å‹é¡¹ç›®ï¼ˆå‡ ç™¾ä¸ªé¡µé¢ï¼‰ä¸­ä½¿ç”¨ <code>EventBus</code> ä¸æ˜¯ä¸è¡Œï¼Œå°±æ˜¯è¿™é‡Œé¢æ°´å¾ˆæ·±ï¼Œå¾ˆéš¾æŠŠæ¡çš„ä½â€¦â€¦</p>\n<p><img src=\"https://img-blog.csdnimg.cn/2021050719014288.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RpenVuY2Fpbmlhbw==,size_16,color_FFFFFF,t_70#pic_center\" alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\"></p>\n<p><code>EventBus</code> çš„ç¼ºç‚¹å°±æ˜¯ <code>Vuex</code> çš„ä¼˜ç‚¹ï¼Œç¼ºä¹ <strong>çŠ¶æ€ç®¡ç†</strong> ã€‚è¯•æƒ³ä¸€ä¸‹æˆ‘ä»¬åœ¨çœ‹ä¸€æ®µä»£ç æ—¶ï¼Œçœ‹åˆ° <code>$emit(&#39;someEvent&#39;)</code> æˆ–  <code>$on(&#39;someEvent&#39;)</code>åæƒ³è¦çŸ¥é“å®ƒåˆ†åˆ«åœ¨å“ªé‡Œè¢«ç›‘å¬ï¼Œåœ¨å“ªé‡Œè¢«è§¦å‘ï¼Œç„¶åå…¨å±€ä¸€æœç«Ÿç„¶æœ‰å‡ åå¤„ï¼Œè¿™â€¦â€¦ğŸ˜µ</p>\n<p>ä½†è¿™å¹¶ä¸æ„å‘³ç€ <code>EventBus</code> åœ¨å¤§å‹é¡¹ç›®ä¸­å°±ä¸èƒ½ç”¨ï¼ŒäºŒè€…ç»“åˆèµ·æ¥ç”¨æ‰æ˜¯æœ€é¦™çš„ã€‚æ¯”å¦‚è¿™æ ·çš„åœºæ™¯ï¼š<strong>æ ¹æ®çˆ¶ç»„ä»¶ä¸­å¯¼èˆªèœå•çš„å¼€åˆçŠ¶æ€åœ¨å­ç»„ä»¶ä¸­å¤„ç†ä¸€äº›é€»è¾‘</strong> ï¼Œç±»ä¼¼äºè¿™æ ·çš„åœºæ™¯ä½¿ç”¨ <code>EventBus</code> æ˜¯ä¸æ˜¯è¦ç®€å•ç²—æš´ä¸€ç‚¹ï¼Œè§¦å‘ä¸ªäº‹ä»¶å°±è§£å†³äº†ã€‚<code>EventBus</code> æ¯”è¾ƒé€‚åˆåœ¨é‚£ç§ <strong>å®šå‘çš„</strong>ã€<strong>è€¦åˆåº¦è¾ƒä½</strong> çš„åŠŸèƒ½åœºæ™¯ä¸­ä½¿ç”¨ã€‚</p>\n<p>å¯¹äº <code>Vuex</code> å’Œ <code>EventBus</code> ä¹‹é—´æˆ‘è§‰å¾—åŸºæœ¬ä¸Šèƒ½å¤Ÿç›¸äº’æ›¿ä»£ï¼Œä½†æ˜¯ä¸èƒ½å®Œç¾æ›¿ä»£ã€‚è¿™ä¸¤è€…åœ¨æˆ‘çš„æ—¥å¸¸å¼€å‘ä¸­éƒ½æ˜¯ç¼ºä¸€ä¸å¯çš„ï¼Œä½†æ˜¯å°±æ˜¯è¿™ä¹ˆå¥½ç”¨çš„ <code>EventBus</code>  åœ¨ <a href=\"https://v3.cn.vuejs.org/guide/migration/events-api.html#%E4%BA%8B%E4%BB%B6-api\">Vue3</a> ä¸­è¢«ç§»é™¤äº†ï¼Œæ€ä¹ˆåŠğŸ¤”ï¼Œå—¯ã€‚ã€‚ã€‚è¦ä¸å†™ä¸€ä¸ªï¼Ÿ</p>\n<h2 id=\"æ­¥éª¤\"><a href=\"#æ­¥éª¤\" class=\"headerlink\" title=\"æ­¥éª¤\"></a>æ­¥éª¤</h2><p>åšä»»ä½•äº‹æƒ…éƒ½æ˜¯åˆ†æ­¥éª¤çš„ï¼ŒæŠŠå¤§è±¡è£…è¿›å†°ç®±é‡Œè¿˜åˆ†æˆ 3 æ­¥å‘¢ï¼Œé‚£ä¹ˆå†™ä¸€ä¸ª <code>EventBus</code> å¯ä»¥åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š</p>\n<ul>\n<li><p><code>on</code> ç”¨æ¥ç›‘å¬å½“å‰å®ä¾‹ä¸Šçš„è‡ªå®šä¹‰äº‹ä»¶ã€‚äº‹ä»¶å¯ä»¥ç”± <code>emit</code> è§¦å‘ã€‚å›è°ƒå‡½æ•°ä¼šæ¥æ”¶æ‰€æœ‰ä¼ å…¥äº‹ä»¶è§¦å‘å‡½æ•°çš„é¢å¤–å‚æ•°ã€‚</p>\n</li>\n<li><p><code>once</code> ç›‘å¬ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œä½†æ˜¯åªè§¦å‘ä¸€æ¬¡ã€‚ä¸€æ—¦è§¦å‘ä¹‹åï¼Œç›‘å¬å™¨å°±ä¼šè¢«ç§»é™¤ã€‚</p>\n</li>\n<li><p><code>off</code> ç§»é™¤è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬å™¨ã€‚</p>\n<ul>\n<li>å¦‚æœæ²¡æœ‰æä¾›å‚æ•°ï¼Œåˆ™ç§»é™¤æ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ï¼›</li>\n<li>å¦‚æœåªæä¾›äº†äº‹ä»¶ï¼Œåˆ™ç§»é™¤è¯¥äº‹ä»¶æ‰€æœ‰çš„ç›‘å¬å™¨ï¼›</li>\n<li>å¦‚æœåŒæ—¶æä¾›äº†äº‹ä»¶ä¸å›è°ƒï¼Œåˆ™åªç§»é™¤è¿™ä¸ªå›è°ƒçš„ç›‘å¬å™¨ã€‚</li>\n</ul>\n</li>\n<li><p><code>emit</code> è§¦å‘å½“å‰å®ä¾‹ä¸Šçš„äº‹ä»¶ã€‚é™„åŠ å‚æ•°éƒ½ä¼šä¼ ç»™ç›‘å¬å™¨å›è°ƒã€‚</p>\n</li>\n</ul>\n<p>ä¸ºäº†å°½é‡ 1:1 æ¨¡æ‹Ÿå‡º Vue2 ä¸­çš„ç”¨æ³•ï¼Œè¿™é‡Œå°±ç›´æ¥ç…§æ¬äº† Vue2 ä¸­çš„ <a href=\"https://cn.vuejs.org/v2/api/#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95-%E4%BA%8B%E4%BB%B6\">#å®ä¾‹æ–¹æ³•-äº‹ä»¶</a> ã€‚æœ‰äº†æ­¥éª¤ä»¥åå®ç°ä¸€ä¸ª <code>EventBus</code> å°±å·²ç»å®Œæˆäº†ä¸€å¤§åŠäº†ï¼Œä¸‹é¢å¾…æˆ‘æ…¢æ…¢é“æ¥ã€‚</p>\n<h2 id=\"äº‹ä»¶ç›‘å¬-on\"><a href=\"#äº‹ä»¶ç›‘å¬-on\" class=\"headerlink\" title=\"äº‹ä»¶ç›‘å¬-on\"></a>äº‹ä»¶ç›‘å¬-on</h2><p><code>on</code> æ–¹æ³•ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ <strong>äº‹ä»¶</strong> <em>string</em> ï¼Œç¬¬äºŒä¸ªæ˜¯ <strong>å›è°ƒå‡½æ•°</strong> ã€‚<code>on</code> ä¸å…¶è¯´æ˜¯äº‹ä»¶ç›‘å¬ï¼Œä¸å¦‚å°†å®ƒç†è§£ä¸º <strong>æ³¨å†Œ</strong> ã€<strong>ç™»è®°</strong> ï¼Œå› ä¸º <code>on</code> çš„æ ¸å¿ƒå°±æ˜¯å°† <strong>äº‹ä»¶</strong> ä»¥åŠå¯¹åº”çš„ <strong>å›è°ƒ</strong> æ”¶é›†ä¾› <code>emit</code> è§¦å‘ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">class DzEmitter &#123;\n    _events &#x3D; &#123;&#125;\n\n    static addEvent(e, callback, isOnce &#x3D; false) &#123;\n        const &#123;_events&#125; &#x3D; this\n        const keys &#x3D; Object.keys(_events)\n        if (keys.includes(e)) &#123;\n            _events[e].isOnce &#x3D; isOnce\n            _events[e].callbacks.push(callback)\n        &#125; else &#123;\n            _events[e] &#x3D; &#123;\n                isOnce,\n                callbacks: [callback]\n            &#125;\n        &#125;\n    &#125;\n\n    &#x2F;&#x2F; ç›‘å¬å½“å‰å®ä¾‹ä¸Šçš„è‡ªå®šä¹‰äº‹ä»¶\n    on(e, callback) &#123;\n        DzEmitter.addEvent.call(this, e, callback)\n    &#125;\n&#125;</code></pre>\n\n<p>è¿™é‡Œä½¿ç”¨ <code>_events</code> æ¥æ”¶é›† <strong>äº‹ä»¶</strong> ä¸ <strong>å›è°ƒ</strong> ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ª <strong>äº‹ä»¶</strong> å¯ä»¥å¯¹åº”å¤šä¸ª <strong>å›è°ƒ</strong> ï¼Œå› æ­¤è¦åŠ ä»¥å¤„ç†ä¸‹ã€‚ä¸€ä¸ªæ³¨å†Œäº†å¤šä¸ªç›¸åŒäº‹ä»¶çš„ <code>_events</code> æ•°æ®å¦‚ä¸‹ï¼š</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">const _events &#x3D; &#123;\n    selfClick: &#123;\n        isOnce: true,\n        callbacks: [fn, fn2]\n    &#125;\n&#125;</code></pre>\n\n<p><code>isOnce</code> æ˜¯ç”¨æ¥åˆ¤æ–­æ³¨å†Œæ¥æºæ˜¯ <code>once</code> è¿˜æ˜¯ <code>on</code> ã€‚</p>\n<h2 id=\"äº‹ä»¶è§¦å‘-emit\"><a href=\"#äº‹ä»¶è§¦å‘-emit\" class=\"headerlink\" title=\"äº‹ä»¶è§¦å‘-emit\"></a>äº‹ä»¶è§¦å‘-emit</h2><p><code>emit</code> ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ <strong>äº‹ä»¶</strong> <em>string</em> ï¼Œç¬¬äºŒä¸ªæ˜¯ <strong>ä¼ ç»™å›è°ƒçš„å‚æ•°</strong> ã€‚å…¶æ ¸å¿ƒå°±æ˜¯æ ¹æ® <strong>äº‹ä»¶åç§°</strong> ï¼ŒæŠŠå‚æ•°ä¼ ç»™ <strong>å›è°ƒ</strong> ï¼Œå¹¶è°ƒç”¨ <strong>å›è°ƒå‡½æ•°</strong> å°±è¡Œäº†ã€‚æ ¹æ®ä¸Šé¢çš„ <code>_events</code> æ•°æ®ï¼Œå†™å‡ºä»¥ä¸‹ä»£ç ï¼š</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&#x2F;&#x2F; è§¦å‘å½“å‰å®ä¾‹ä¸Šçš„äº‹ä»¶ã€‚é™„åŠ å‚æ•°éƒ½ä¼šä¼ ç»™ç›‘å¬å™¨å›è°ƒã€‚\nemit(e, data) &#123;\n    try &#123;\n        const &#123;callbacks, isOnce&#125; &#x3D; this._events[e]\n        callbacks.forEach(fn &#x3D;&gt; fn(data))\n        isOnce &amp;&amp; this.off(e)\n    &#125; catch (e) &#123;\n        console.error(e)\n    &#125;\n&#125;</code></pre>\n\n<p>å› ä¸ºä¸€ä¸ª <strong>äº‹ä»¶</strong> å¯¹åº”å¤šä¸ª <strong>å›è°ƒ</strong> ï¼Œæ‰€ä»¥è§¦å‘äº‹ä»¶æ—¶å®ƒå¯¹åº”çš„æ•°ä¸ªå›è°ƒè¦ä¸€åŒè°ƒç”¨ã€‚ç”± <code>once</code> æ³¨å†Œçš„äº‹ä»¶éœ€è¦åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨åé”€æ¯æ‰ã€‚</p>\n<h2 id=\"å®Œæ•´ä»£ç \"><a href=\"#å®Œæ•´ä»£ç \" class=\"headerlink\" title=\"å®Œæ•´ä»£ç \"></a>å®Œæ•´ä»£ç </h2><p>å…³äº <code>once</code> å’Œ <code>off</code> å°±ä¸å•ç‹¬è®²äº†ï¼Œç›´æ¥ä¸Šå…¨éƒ¨ä»£ç ï¼š</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">class DzEmitter &#123;\n    _events &#x3D; &#123;&#125;\n\n    static addEvent(e, callback, isOnce &#x3D; false) &#123;\n        const &#123;_events&#125; &#x3D; this\n        const keys &#x3D; Object.keys(_events)\n        if (keys.includes(e)) &#123;\n            _events[e].isOnce &#x3D; isOnce\n            _events[e].callbacks.push(callback)\n        &#125; else &#123;\n            _events[e] &#x3D; &#123;\n                isOnce,\n                callbacks: [callback]\n            &#125;\n        &#125;\n    &#125;\n\n    &#x2F;&#x2F; è§¦å‘å½“å‰å®ä¾‹ä¸Šçš„äº‹ä»¶ã€‚é™„åŠ å‚æ•°éƒ½ä¼šä¼ ç»™ç›‘å¬å™¨å›è°ƒã€‚\n    emit(e, data) &#123;\n        try &#123;\n            const &#123;callbacks, isOnce&#125; &#x3D; this._events[e]\n            callbacks.forEach(fn &#x3D;&gt; fn(data))\n            isOnce &amp;&amp; this.off(e)\n        &#125; catch (e) &#123;\n            console.error(e)\n        &#125;\n    &#125;\n\n    &#x2F;&#x2F; ç›‘å¬å½“å‰å®ä¾‹ä¸Šçš„è‡ªå®šä¹‰äº‹ä»¶\n    on(e, callback) &#123;\n        DzEmitter.addEvent.call(this, e, callback)\n    &#125;\n\n    &#x2F;&#x2F; ç›‘å¬ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œä½†æ˜¯åªè§¦å‘ä¸€æ¬¡ã€‚ä¸€æ—¦è§¦å‘ä¹‹åï¼Œç›‘å¬å™¨å°±ä¼šè¢«ç§»é™¤\n    once(e, callback) &#123;\n        DzEmitter.addEvent.call(this, e, callback, true)\n    &#125;\n\n    &#x2F;&#x2F; ç§»é™¤è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬å™¨\n    off(e, callback) &#123;\n        &#x2F;&#x2F; å¦‚æœæ²¡æœ‰æä¾›å‚æ•°ï¼Œåˆ™ç§»é™¤æ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨\n        if (!arguments.length) &#123;\n            this._events &#x3D; &#123;&#125;\n        &#125;\n\n        &#x2F;&#x2F; å¦‚æœåªæä¾›äº†äº‹ä»¶ï¼Œåˆ™ç§»é™¤è¯¥äº‹ä»¶æ‰€æœ‰çš„ç›‘å¬å™¨\n        if (e &amp;&amp; !callback) &#123;\n            delete this._events[e]\n        &#125;\n\n        &#x2F;&#x2F; å¦‚æœåŒæ—¶æä¾›äº†äº‹ä»¶ä¸å›è°ƒï¼Œåˆ™åªç§»é™¤è¿™ä¸ªå›è°ƒçš„ç›‘å¬å™¨\n        if (e &amp;&amp; callback) &#123;\n            const &#123;callbacks&#125; &#x3D; this._events[e]\n            const index &#x3D; callbacks.findIndex(fn &#x3D;&gt; fn &#x3D;&#x3D;&#x3D; callback)\n            index &gt;&#x3D; 0 &amp;&amp; callbacks.splice(index, 1)\n        &#125;\n    &#125;\n&#125;</code></pre>\n\n<p>ä»¥ä¸ŠåŸºæœ¬ 1:1 æ¨¡æ‹Ÿäº† vue2 ä¸­çš„ <code>EventBus</code>  ï¼ˆpsï¼šç§»é™¤äº†æ•°ç»„ä¼ å‚çš„æ–¹å¼ï¼‰ï¼Œå°†å®ƒè®¾ä¸ºä¸€ä¸ªå…¨å±€å¯¹è±¡åå°±èƒ½å®ç°äº‹ä»¶çš„ç›‘å¬å’Œè§¦å‘ï¼Œä»è€Œå®ç°å…¨å±€é€šä¿¡ã€‚åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ï¼š</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">const emitter &#x3D; new DzEmitter()\n\nconst onClickFn &#x3D; data &#x3D;&gt; &#123;\n\tconsole.log(&#39;on-1&#39;, data);\n&#125;\nconst onClickFn2 &#x3D; data &#x3D;&gt; &#123;\n\tconsole.log(&#39;on-2&#39;, data);\n&#125;\nconst onceClickFn &#x3D; data &#x3D;&gt; &#123;\n\tconsole.log(&#39;once-1&#39;, data);\n&#125;\n\nemitter.on(&#39;onClick&#39;, onClickFn)\nemitter.on(&#39;onClick&#39;, onClickFn2)\nemitter.once(&#39;onceClick&#39;, onceClickFn)\n\n&#x2F;&#x2F; emitter.off(&#39;onClick&#39;, onClickFn2)\n&#x2F;&#x2F; emitter.off(&#39;onClick&#39;)\n\nsetTimeout(() &#x3D;&gt; &#123;\n    emitter.emit(&#39;onClick&#39;, &#96;è§¦å‘äº‹ä»¶ï¼šonClick&#96;)\n    emitter.emit(&#39;onceClick&#39;, &#96;è§¦å‘äº‹ä»¶ï¼šonceClick&#96;)\n    console.log(emitter);\n&#125;, 1000)</code></pre>\n\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>ä»¥ä¸Šä¾¿æ˜¯æˆ‘å°è¯•å†™ä¸€ä¸ª <code>EventBus</code> çš„å…¨éƒ¨äº†ï¼Œæ•´ä½“ä»£ç é‡è¿˜æ˜¯éå¸¸å°‘çš„ã€‚çŒœæµ‹ä¸€ä¸‹å°¤å¤§åœ¨ Vue3 ä¸­ç§»é™¤ <code>EventBus</code> çš„åŸå› ï¼Œå¯èƒ½æ˜¯å‡ºäºæ›´å¥½çš„æ€§èƒ½è€ƒè™‘å§ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸ºäº†æ›´è´´åˆ‡æˆ‘ä»¬æ—¥å¸¸çš„ç¼–ç¨‹ç›´è§‰å§ã€‚æ¯•ç«Ÿå®ç°ä¸€ä¸ªç®€å•çš„ <code>EventBus</code> éœ€è¦ç”Ÿæˆä¸€ä¸ªå¤æ‚çš„ Vue å®ä¾‹æ„Ÿè§‰ä¸æ˜¯å¤ªå¥½ï¼ˆpsï¼šä¸çº¯ç²¹ï¼Œä¼šæœ‰å¤ªå¤šä¸ç›¸å¹²çš„å±æ€§æ–¹æ³•ï¼‰ï¼Œå€ŸåŠ©äºä¸€äº›ä¸“æ³¨çš„åº“æ¥å®ç°è¿™ä¸ªåŠŸèƒ½åº”è¯¥ä¼šæ›´å¥½ã€‚<br>ä»¥ä¸Šä»£ç ä»…ç”¨äºäº¤æµåˆ†äº«ï¼Œè¯·ä¸è¦ç”¨åœ¨å®é™…å¼€å‘ä¸­ï¼Œå‡ºäº†é—®é¢˜æœ¬äººæ¦‚ä¸è´Ÿè´£ğŸ¤£ğŸ¤£ã€‚ æƒ³è¦åœ¨ Vue3 ä¸­ä½¿ç”¨ <code>EventBus</code> åŠŸèƒ½çš„ï¼Œè¯·çœ‹å®ƒçš„ <a href=\"https://v3.cn.vuejs.org/guide/migration/events-api.html#%E8%BF%81%E7%A7%BB%E7%AD%96%E7%95%A5\">å®˜æ–¹æ¨è</a> ã€‚</p>\n","feature":true,"text":"å‰è¨€æˆ‘ä»¬éƒ½çŸ¥é“åœ¨ Vue ä¸­çˆ¶å­ç»„ä»¶é€šä¿¡ä½¿ç”¨ propsã€$emitï¼Œå…„å¼Ÿç»„ä»¶æˆ–è€…è·¨ç»„ä»¶ä¹‹é—´å¯ä»¥é€šè¿‡ Vuex æˆ– EventBus ï¼ŒåŒ…æ‹¬ $parent ã€$root å’Œ $refs éƒ½æ˜¯å¯ä»¥è¾¾åˆ°é€šä¿¡çš„ç›®çš„ï¼Œæ€»ä¹‹ Vue ç»„ä»¶ä¹‹é—´çš„é€šä¿¡æ–¹å¼éå¸¸ä¸°å¯Œã€‚ ä»Šå¤©çš„ä¸»è§’æ˜¯EventB...","link":"","photos":[],"count_time":{"symbolsCount":"5.6k","symbolsTime":"5 mins."},"categories":[],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">å‰è¨€</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%AD%A5%E9%AA%A4\"><span class=\"toc-text\">æ­¥éª¤</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC-on\"><span class=\"toc-text\">äº‹ä»¶ç›‘å¬-on</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91-emit\"><span class=\"toc-text\">äº‹ä»¶è§¦å‘-emit</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81\"><span class=\"toc-text\">å®Œæ•´ä»£ç </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">æ€»ç»“</span></a></li></ol>","author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Greedy Snake","uid":"506ca00e65144df18d66801c0d8409c9","slug":"greedy-snake","date":"2021-12-23T07:47:51.000Z","updated":"2021-12-24T11:28:21.417Z","comments":true,"path":"api/articles/greedy-snake.json","keywords":"å¸å°Šèœé¸Ÿä¸ªäººåšå®¢ï¼Œå¸å°Šèœé¸Ÿä¸ªäººç½‘ç«™ï¼Œwebå‰ç«¯ï¼ŒJavaScriptï¼ŒCSSï¼ŒHTML","cover":[],"text":"æ•ˆæœå›¾æœ€è¿‘ä½¿ç”¨ JS å†™äº†ä¸€ä¸ªè´ªåƒè›‡æ¸¸æˆï¼Œæ•ˆæœå¦‚ä¸‹ï¼š è°·æ­Œæµè§ˆå™¨ç‚¹å‡»ç›´æ¥åœ¨çº¿ç© å‰è¨€è´ªåƒè›‡ä½œä¸ºä¸€æ¬¾ç»å…¸åˆç®€å•çš„å°æ¸¸æˆï¼Œæ¯ä¸ªäººéƒ½ç©è¿‡ã€‚å®ç°ä¸€ä¸ªè´ªåƒè›‡æ¸¸æˆåŸºæœ¬å…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š æ£‹ç›˜ï¼ˆä¹Ÿè¢«ç§°ä½œ â€œåœ°å›¾â€ï¼Œæˆ‘è¿™é‡Œç”»çš„åƒä¸€ä¸ªå›´æ£‹æ£‹ç›˜ï¼Œç´¢æ€§å°±å«æ£‹ç›˜ï¼‰ è›‡ ï¼ˆç»†è‡´ä¸€ç‚¹åˆ†ä¸ºï¼šè›‡å¤´ã€è›‡èº«ã€è›‡å°¾ï¼‰ æ–¹...","link":"","photos":[],"count_time":{"symbolsCount":"3.9k","symbolsTime":"4 mins."},"categories":[],"tags":[],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{}}